<!--
To change this template, choose Tools | Templates
and open the template in the editor.
-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
  <head>
    <title>ModbusPal</title>
    <link rel="stylesheet" type="text/css" href="styles.css" />
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  </head>
  <body>
      
      <h1>Automations in ModbusPal</h1>

      <p>The registers and coils defined in the slaves of the project will become
      dynamic by binding them to value generators, called <q>automations</q>.
      Using automations will turn simple projects into realistic simulations.</p>
      
      <h2>Overview</h2>
      
      <p>An <q>automation</q> is made of a succession of <q>generators</q>.
      Each generator is a formula that produces a dynamic value.
      A generator is executed for a limited duration, and then the next
      generator is used to continue producing the dynamic value.</p>

      
For example, consider the following requirements:
 The above graph is made of 3 segments. It can be simulated by using 3 linear generators:

Additionally, the “Loop” option can be enabled so that the automation restarts from the beginning when its end is reached. Otherwise, it would stop.
8.2	Creating an automation
Clicking on « Add » button in the “Automation” tab creates a new automation in the current project:


Create a new automation by clicking on the « Add » button
The new automation is instantly added into the list. It contains no generator, and thus cannot generate a dynamic value.
8.3	Automation’s name
It is very important that each automation in the project has a unique name. The name of the automation is what ModbusPal uses to associate automations with the registers/coils of the MODBUS slaves.
The name of the automation can be changed, though. If the new name is identical to the name of another existing automation, an error message will appear.
8.4	Editing an automation
8.4.1	Open the editor
An automation is edited in a dedicated window, called automation editor. The automation editor is opened by clicking on the corresponding   (show) button in the main window:

Click on the “Show” button in order to open the automation editor

The automation editor looks like this:

The look of the automation editor.
The editor contains the following panels:
•	“Add generators”: a list of buttons to add generators in the current automation. It also contain a button to summon the script manager dialog, because the user can create custom generators by using scripts.
•	“Global settings”: define the initial value of the automation, and the sampling rate (“Step”, in second).
•	“Controls”: buttons to control the execution of the automation.
•	“Value”: a real-time visualization of the current value of the automation.
8.4.2	Settings
The settings of the automation are located in the “Global settings” and “Controls” panels:

The settings of the automation are located in ”Global settings” and “Controls”
8.4.2.1	Initial value (“Init”)
The “Init” field is a floating point value that specifies the initial value of the automation.
8.4.2.2	Sampling rate (“Step”)
The “Step” is a value in seconds, which defines the duration between two updates of the value generated by the automation. The smaller the “step” is, the higher is the refresh rate of the value.
8.4.2.3	Loop
The “Loop” toggle button determines, when the automation ends, if it should restarts automatically from the beginning.
8.4.3	Add generator
A generator is added into the automation by clicking on the appropriate button in the “Add generators” panel. Each button represents a type of generator.

Add a generator by clicking on its name, or click on “…” to add scripted generators
ModbusPal embeds a few built-in generators (refer to §9, “Generators“). They are always available, but may not be sufficient; More generators can be added in the project by using scripts (refer to §11).
The new generator is always added at the end of the list.
A generator looks like this:

A generator looks like this
Every generator contains an icon with a subtitle on the left, some buttons and settings on the right. It may contain additional settings in the middle, which are specific to each type of generator.
8.4.4	Duration of generators
Each generator is executed for a determined amount of time, called “duration”, and then the automation goes on with the next generator in the list.
The duration is configured by typing the desired number of seconds in the “Duration” input box of each generator in the list.

The duration of a generator, in seconds
8.4.5	Changing the order of execution
The order of execution of the generators can be changed by swapping them, using the “Up” and “Down” buttons.
Clicking on “Up” will swap the current generator with the one directly before.
Clinking on “Down” will swap the current generator with the one directly after.

Change the execution order by using the “Up” and “Down” buttons
8.4.6	Deleting a generator
Clicking on the “Delete” button will remove a generator from the current automation.

Click on “Delete” to remove the generator from the automation
8.5	Delete automation
Clicking on the   (delete) button will remove an automation from the current project.

Click on the “Show” button in order to open the automation editor
Note: any association between the removed automation and the MODBUS slaves will also be deleted.
8.6	Binding automation
Bindings are required to associate automations and MODBUS slaves.
Refer to §11, “Bindings”, to learn about bindings and how to create them.
8.7	Executing automations
When a project file is loaded, or when new automations are created, automations are stopped and do not generate dynamic values. They have to be started.
8.7.1	Start/Stop from the main window
An automation can be started or stopped from the main window by toggling the corresponding Start/Stop button in the main window:

Click on “Start” to start the execution of an automation.
When the automation starts, the corresponding entry in the list of the main window is grayed, and the “Start” button becomes a “Stop” button.

Click on “Stop” to stop the execution of the automation.
8.7.2	Start/Stop/Pause in the automation editor
An automation can be started, paused or stopped from the automation’s editor. Click on the corresponding “Show” button in order to display the automation’s editor, and focus on the “Controls” panel.
Click on the “Play” button in order to start the execution of the automation.

Click on “Play” to start the execution of the automation.
While the automation is running, it can be suspended by clicking on “Pause”. As long as the automation is paused, its current state won’t be modified: the current time reference and the current output value are constant.

Click on “Pause” to suspend the automation.
Clicking on “Pause” again will let the automation resume its execution, starting from the state it was in while suspended.
Finally, the execution of the automation can be by clicking on the “Stop” button.

Click on “Stop” to stop the execution of the automation.
8.7.3	Loop
When an automation starts, it executes each generator one by one during the specified amount of time. When the execution of the last generator is finished, the automation ends, and the generated value is no more updated, unless the “Loop” option is enabled.
If the “Loop” option is enabled, then the execution of the automation continues infinitely by restarting the whole generators sequence.

Click on ”Loop” in order to enable or disable the loop option.
Note 1: “Loop” is enabled by default.
Note 2: the internal counter that keeps track of elapsed time is not resetted when the sequence restarts.

9	Generators
This section describes how to use the built-in generators and get the best out of them.


  </body>
</html>
